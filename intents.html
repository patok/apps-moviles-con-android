<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Desarrollo de Aplicaciones con Android - Seminario 2 (AUS)</title>

		<link rel="stylesheet" href="dist/reset.css">
		<link rel="stylesheet" href="dist/reveal.css">
		<link rel="stylesheet" href="dist/theme/black.css" id="theme">

		<!-- Theme used for syntax highlighted code -->
		<link rel="stylesheet" href="plugin/highlight/monokai.css" id="highlight-theme">
	</head>

<body>

	<div class="reveal">

		<!-- Any section element inside of this container is displayed as a slide -->
		<div class="slides">
			<section data-background-video="video/android.mp4">
				<h1>Activities & Intents - Eventos del sistema</h1>
				<h3>Seminario 2 - AUS</h3>
				<p>
					<small>Created by <a href="http://keilty.com.ar">Patricio Keilty</a> / <a
							href="http://twitter.com/patokeilty">@patokeilty</a></small>
				</p>
				<p>
					<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/">
						<img alt="Licencia Creative Commons" style="border-width:0" src="img/cc-by-nc-sa-88x31.png" />
					</a>
				</p>
			</section>

			<section>
				<h1>Activity</h1>
				<p>Componente visual del app</p>
				<ul>
					<li class="fragment roll-in">provee una UI para interacción con el usuario</li>
					<li class="fragment roll-in">una app se puede componer de un encadenamiento de 1+ Activity</li>
					<li class="fragment roll-in">en Android, una tarea (Task) comprende una serie de Activities relacionadas, como
						resultado de las acciones del usuario</li>
					<li class="fragment roll-in">la navegación de una Activity a otra en Android está asociada al concepto de: Task
						(tarea) y Task Backstack (pila de activities)</li>
					<ul>
			</section>

			<section>
				<h2>Task Backstack</h2>
				<img title="backstack" src="img/diagram_backstack.png" style="background-color: white;">
				<p>
				<ul>
					<li class="fragment roll-in">lanza una app ventana principal: Activity1</li>
					<li class="fragment roll-in">luego inicia Activity2</li>
					<li class="fragment roll-in">luego inicia Activity3</li>
					<li class="fragment roll-in">se presiona botón back: Activity3 destruida</li>
					<li class="fragment roll-in">Activity2 queda al frente</li>
				</ul>
				</p>
				<p class="fragment roll-in">ref:<a
						href="http://developer.android.com/guide/topics/fundamentals/tasks-and-back-stack.html">http://developer.android.com/guide/topics/fundamentals/tasks-and-back-stack.html</a>
				</p>
			</section>

			<section>
				<h3>Estados de un Activity</h3>
				<p></p>
				<ul>
				<li class="fragment roll-in">Resumed/Running - visible, ususario interactuando</li>
				<li class="fragment roll-in">Paused/Visible - visible, usuario no interactúa, puede ser destruida</li>
				<li class="fragment roll-in">Stopped - no visible, puede ser destruida</li>
				<ul>
			</section>

			<section>
				<h3>Callbacks de un Activity</h3>
				<p></p>
				<ul>
				<li class="fragment roll-in">onCreate() - cuando va a ser creada</li>
				<li class="fragment roll-in">onStart() - cuando está por ser visible</li>
				<li class="fragment roll-in">onDestroy() - cuando va a ser destruida</li>
				<ul>
			</section>

			<section>
				<h3>Ciclo de vida de un Activity</h3>
				<p><img title="lifecycle" src="img/activity_lifecycle.png"  style="background-color: white; width: 50%; margin: 0px;"></p>
			</section>

			<section>
				<h2>Intents</h2>
				<p>Es un objeto para mensajes que se usa para invocar una acción sobre otro componente de una app.
					<br />Los 3 casos fundamentales en que se emplea son:
				<ul>
					<li class="fragment roll-in">iniciar una Activity, pasando el Intent al método
						<strong>startActivity()</strong> o <strong>startActivityForResult()</strong></li>
					<li class="fragment roll-in">iniciar un Service: usandolo con <strong>startService()</strong> o
						<strong>bindService()</strong></li>
					<li class="fragment roll-in">transmitir un evento (p/ BroadcastReceivers), a través de
						<strong>sendBroadcast()</strong></li>
				</ul>
				</p>
			</section>

			<section>
				<h2>Intents</h2>
				<h3>tipos</h3>
				<ul>
					<li class=""><strong>explícito</strong>: especifica el componente por nombre (nombre completo de la
						clase)</li>
					<li class=""><strong>implícito</strong>: no se nombre ningún componente específico, en cambio de
						declara una acción a ejecutar</li>
				</ul>
			</section>
			<section>
				<h2>Intents</h2>
				<div style="display: inline-block; margin: auto; background-color: white;"><img src="img/intent-activity.png"
					style="width: 50%"></div>
				<ol>
					<li class="fragment roll-in">Activity A crea un Intent con una acción determinada llamando a
						<strong>startActivity()</strong></li>
					<li class="fragment roll-in">el sistema Android busca una app que matchea el intent ... si encuentra,</li>
					<li class="fragment roll-in">el sistema instancia la activity (Activity B), llama al método
						<strong>onCreate()</strong>, pasándole el Intent</li>
				</ol>
			</section>


			<section>
				<h3>Información en Intents</h3>
				<p>
				<ul>
					<li class="fragment roll-in"><strong>Component</strong>: Nombre del componente a invocar (opcional),
						necesario si la invocación es explícita!</li>
					<li class="fragment roll-in"><strong>Action</strong>: especifica la acción genérica a realizar ,ej.
						ACTION_VIEW para visualizar cierta información del usuario, ACTION_SEND el usuario tiene para
						compartir datos con otra aplicación)</li>
				</ul>
			</section>
			<section>
				<h3>Información en Intents ...</h3>
				<p>
				<ul>
					<li class="fragment roll-in"><strong>Data</strong>: el URI que referencia los datos para ser usados
						y/o el MIME type de los datos. El tipo de datos provisto es determinado por la acción invocada
						(ej.: ACTION_EDIT requiere el URI del documento a editar). Están disponibles los métodos
						<strong>setData()</strong>,<strong>setType()</strong> y <strong>setDataAndType()</strong></li>
					<li class="fragment roll-in"><strong>Category</strong>: información adicional acerda del tipo de
						componente que debería manejar el Intent, ej.: CATEGORY_BROWSABLE mostrar contenido web,
						CATEGORY_LAUNCHER actividad inicial de app</li>
				</ul>

			</section>
			<section>
				<h3>Información en Intents ...</h3>
				<p>
				<ul>
					<li class="fragment roll-in"><strong>Extras</strong>: pares clave-valor con info adicional
						requerida, algunas acciones requiren info extra, ej. String[] Intent.EXTRA_EMAIL con las
						direcciones y Intent.EXTRA_SUBJECT para componer email</li>
					<li class="fragment roll-in"><strong>Flags</strong>: pueden especificar de qué manera lanzar una
						Activity (a que tarea pertenece) y cómo tratarla una vez que se ha invocado
						(FLAG_ACTIVITY_NO_HISTORY)</li>
				</ul>
				ref.: <a href="https://developer.android.com/guide/components/intents-common">Intent comunes</a> 
			</section>

			<section>
				<h2>Explicit Intent</h2>
				<p>Ejemplo, si se construye un servicio dentro de nuestra app, de nombre DownloadService, responsable de
					descargar un file</p>
				<p>
				<pre><code data-trim>
// Executed in an Activity, so 'this' is the Context
// The fileUrl is a string URL, such as "http://www.example.com/image.png"
Intent downloadIntent = new Intent(this, DownloadService.class);
downloadIntent.setData(Uri.parse(fileUrl));
startService(downloadIntent);
</code></pre>
				</p>
			</section>


			<section>
				<h2>Implicit Intent</h2>
				<p>Ejemplo, se desea enviar un mensaje de texto desde la app</p>
				<p>
				<pre><code data-trim>
// Create the text message with a string
Intent sendIntent = new Intent();
sendIntent.setAction(Intent.ACTION_SEND);
sendIntent.putExtra(Intent.EXTRA_TEXT, textMessage);
sendIntent.setType(HTTP.PLAIN_TEXT_TYPE); // "text/plain" MIME type

// Verify that the intent will resolve to an activity
if (sendIntent.resolveActivity(getPackageManager()) != null) {
    startActivity(sendIntent);
}
</code></pre>
				</p>
			</section>

			<section>
				<h3>Recibiendo Intents (implícitos)</h3>
				<p>Para declarar los Intents que tu app puede recibir, se debe declarar intent filters para cada uno de
					los components de tu app <strong>&lt;intent-filter&gt;</strong> en el manifest, utilizando los
					siguientes elementos:
				<ul>
					<li class="fragment roll-in">action : la acción que acepta</li>
					<li class="fragment roll-in">data : el tipo de datos que acepta (data URI y MIME type)</li>
					<li class="fragment roll-in">category : la categoría aceptada (para recibir intents implícitos se
						debe especificar CATEGORY_DEFAULT siempre)</li>
				</ul>
			</section>
			<section>
				<h3>Recibiendo Intents (implícitos)...</h3>
				<pre class="fragment roll-in"><code data-trim>
&lt;activity android:name="ShareActivity"&gt;
    &lt;intent-filter&gt;
        &lt;action android:name="android.intent.action.SEND"/&gt;
        &lt;category android:name="android.intent.category.DEFAULT"/&gt;
        &lt;data android:mimeType="text/plain"/&gt;
    &lt;/intent-filter&gt;
&lt;/activity&gt;
</code></pre>
			</section>

			<section>
				<h2>Intent tips</h2>
				<p>comando adb para obtener información de los intent filters de las apps instaladas</p>
				<p>
				<pre><code data-trim>
adb shell dumpsys package
</code></pre>
				</p>
			</section>

		</div>

	</div>

	<script src="dist/reveal.js"></script>
	<script src="plugin/zoom/zoom.js"></script>
	<script src="plugin/notes/notes.js"></script>
	<script src="plugin/search/search.js"></script>
	<script src="plugin/markdown/markdown.js"></script>
	<script src="plugin/highlight/highlight.js"></script>
	<script>

		// Also available as an ES module, see:
		// https://revealjs.com/initialization/
		Reveal.initialize({
			controls: true,
			progress: true,
			center: true,
			hash: true,

			// Learn about plugins: https://revealjs.com/plugins/
			plugins: [ RevealZoom, RevealNotes, RevealSearch, RevealMarkdown, RevealHighlight ]
		});

	</script>

</body>

</html>