<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Desarrollo de Aplicaciones con Android - Seminario 2 (AUS)</title>

		<link rel="stylesheet" href="dist/reset.css">
		<link rel="stylesheet" href="dist/reveal.css">
		<link rel="stylesheet" href="dist/theme/black.css" id="theme">

		<!-- Theme used for syntax highlighted code -->
		<link rel="stylesheet" href="plugin/highlight/monokai.css" id="highlight-theme">
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section data-background-video="video/android.mp4">
					<h1>Notificaciones</h1>
					<h3>Seminario 2 - AUS</h3>
					<p>
						<small>Created by <a href="http://keilty.com.ar">Patricio Keilty</a> / <a href="http://twitter.com/patokeilty">@patokeilty</a></small>
					</p>
                    <p>
                        <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/">
                            <img alt="Licencia Creative Commons" style="border-width:0" src="img/cc-by-nc-sa-88x31.png" />
                        </a>
                    </p>
				</section>

				<section>
					<h1>Notificaciones</h1>
					<h2></h2>
					<p>Una notificacion es un mensaje que puedes mostrar al usuario fuera de la interacción normal de la interface (UI).
					<br/>por ej.
                        <ul>
                        <li >envío exitoso de un email</li>
                        <li >llegada de un mensaje de texto</li>
                        <li >finalización de una descarga</li>
                        <li >etc</li>
                        </ul>				</section>

				<section>
					<h2>Notificaciones</h2>
<p>Vamos a ver 2 tipos distintos de notificaciones:
                        <ul>
                        <li class="fragment highlight-blue">Toast messages: mensajes temporales, que proveen feedback simple en pantalla por unos instantes.</li>
                        <li class="fragment highlight-blue">Notificaciones de usuario: son no-intrusivas, aparecen en el área de notificaciones, son persistentes y son manejadas por el servicio de sistema Notification Manager.</li>
                        </ul>
				</section>
				<section>
						<h2>Toast messages</h2>
						<h3></h3>
<p>Provee feedback en un popup, apareciendo (fade-in) y desaparenciendo(fade-out) al cabo de un lapso de tiempo. La activity actual permanece visible y activa.
<p>
			<img title="toast" style="background: white;" src="img/toast.png">
						</p>
<p>si requiere intervención del usuario utilice en cambio las notificaciones en la barra de estado.
				</section>

				<section>
					<section>
						<h3>Toast messages con custom view</h3>
						<p>Es posible personalizar los popups utilizando un layout propio.</p>
						<p>
						<pre><code data-trim>
				&lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
				              android:id="@+id/toast_layout_root"
				              android:orientation="horizontal"
				              android:layout_width="fill_parent"
				              android:layout_height="fill_parent"
				              android:padding="8dp"
				              android:background="#DAAA"
				              &gt;
				    &lt;ImageView android:src="@drawable/ic_launcher"
				               android:layout_width="wrap_content"
				               android:layout_height="wrap_content"
				               android:layout_marginRight="8dp"
				               /&gt;
				    &lt;TextView android:id="@+id/text"
				              android:layout_width="wrap_content"
				              android:layout_height="wrap_content"
				              android:textColor="#FFF"
				              /&gt;
				&lt;/LinearLayout&gt;
				</code></pre>
						</p>
					</section>
					<section>
						<h3>Toast messages con custom view ... </h3>
						<pre><code data-trim>
					LayoutInflater inflater = getLayoutInflater();
					View layout = inflater.inflate(R.layout.toast_layout,
						                       (ViewGroup) findViewById(R.id.toast_layout_root));
				
					TextView text = (TextView) layout.findViewById(R.id.text);
					text.setText("Un toast customizado");
				
					Toast toast = new Toast(getApplicationContext());
					toast.setGravity(Gravity.CENTER_VERTICAL, 0, 0);
					toast.setDuration(Toast.LENGTH_SHORT);
					toast.setView(layout);
					toast.show();
				</code></pre>
						</p>
					</section>
				</section>

				<section>
					<h2>Notificaciones de usuario</h2>
					<section>
						<p>Una notificación es un mensaje que se muestra al usuario fuera de la interacción normal de la interface (UI).
						<div><img title="icon-notif" src="img/iconic_notification.png" style="background: white; vertical-align : top;"></div>
					</section>
					<section>
						<div><img title="detailed-notif" src="img/normal_notification.png" style="background: white; vertical-align : top;">
						</div>
				
						Cuando se pide al sistema que envíe una notificación, primero aparece un ícono en al <strong>área de
							notificación</strong>. Para ver los detalles de la misma, el usuario debe expandir el área de notificiones o
						<strong>buzón de notificaciones</strong>(notification drawer).
					</section>
				
				</section>

<!-- Notification display elements -->
                <section>
                    <h3>Notificación : elementos visuales</h3>
<h4>Area de notificaciones</h4>
<p>Para no interferir con las acciones del usuario aparece en el área de notificaciones, mostrando
                        <ul>
                        <li class="fragment ">small icon</li>
                        <li class="fragment ">ticker: texto rotativo</li>
                        </ul>
                </section>

                <section>
                    <h3>Notificación : elementos visuales</h3>
<h4>Vista normal</h4>
                    <div><img title="local" src="img/normal_notification_callouts.png" style="background: white;"></div>
                        <ol>
                        <li class="fragment highlight-current-red">Content title</li>
                        <li class="fragment highlight-current-red">Large icon</li>
                        <li class="fragment highlight-current-red">Content text</li>
                        <li class="fragment highlight-current-red">Content info</li>
                        <li class="fragment highlight-current-red">Small icon</li>
                        <li class="fragment highlight-current-red">Hora en que fue enviada</li>
                        </ol>
                </section>


                <section>
                    <h3>Notificación : elementos visuales</h3>
<h4>Vista grande</h4>
					<div  style="display: inline-block; width:40%;vertical-align: top;"><img style="margin: auto; background: white; align-content: top
					;" src="img/bigpicture_notification_callouts.png">
					</div>
					<div style="display: inline-block; width:40%; margin: 10px;">
                        <ol>
                        <li class="fragment roll-in blue"> Content title</li>
                        <li class="fragment roll-in blue"> Large icon</li>
                        <li class="fragment roll-in blue"> Content text</li>
                        <li class="fragment roll-in blue"> Content info</li>
                        <li class="fragment roll-in blue"> Small icon</li>
                        <li class="fragment roll-in blue"> Hora en que fue enviada</li>
                        <li class="fragment roll-in blue" >Area de detalle</li>
						</ol>
					</div>
                </section>

<!-- ej de uso de notificaciones: llamada en espera -->




<!-- creando una notificación -->

                <section>
                    <h2>Creando una notificación</h2>
			<p>Mínimamente para crear una notificación se requiere lo siguiente:
                        <ul>
                        <li class="fragment roll-in" data-fragment-index="1">small icon</li>
                        <li class="fragment roll-in" data-fragment-index="1">content title</li>
                        <li class="fragment roll-in" data-fragment-index="1">content text</li>
                        <li class="fragment roll-in" data-fragment-index="2">action: PendingIntent para disparar alguna activity/app al tocar la notificación (opcional)</li>
                        </ul>
                </section>
				<section>
						<h3>Creando una notificación</h3>
<p><pre><code data-trim>

// create a pending intent
Intent notificationIntent = new Intent(getApplicationContext(),
		NotificationActivity.class);
PendingIntent pendingIntent = PendingIntent.getActivity(getApplicationContext(), 0,
		notificationIntent, Intent.FLAG_ACTIVITY_NEW_TASK);

// user builder to prepare notification
Notification.Builder notificationBuilder = new Notification.Builder(
		getApplicationContext())
		.setTicker(getResources().getString(R.string.ticker_text))
		.setSmallIcon(android.R.drawable.stat_sys_warning)
		.setAutoCancel(true)
		.setContentTitle(getResources().getString(R.string.notification_title))
		.setContentText(getResources().getString(R.string.notification_text))
		.setContentIntent(pendingIntent);

// pass the Notification to the NotificationManager
NotificationManager notificationManager = 
             (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
notificationManager.notify(NOTIFICATION_ID, notificationBuilder.build());
</code></pre></p>

				</section>
				<section>
						<h3>Actualizando/borrando una notificación</h3>
<p><pre><code data-trim>

NotificationManager notificationManager = 
       (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
notificationManager.cancelAll();
</code></pre></p>

				</section>

				<section>
						<h3>Guías de diseño para notificar, dar feedback y obtener respuestas</h3>
		<p>
<ul>
	<li >UX Design: <a href="http://developer.android.com/design/patterns/confirming-acknowledging.html">Confirming & Acknowledging</a></li>
	<li >UX Design: <a href="http://developer.android.com/design/patterns/notifications.html">Notifications</a></li>
</ul>

				</section>


                <section>
                    <h2>BroadcastReceiver</h2>
<p>El sistema emite notificaciones de eventos (Intents) a todos los receivers registrados.<br/>
                        <ul>
                        <li class="fragment roll-in" >registrarse para recibir Intents</li>
                        <li class="fragment roll-in" >algún componente o app transmite el Intent (<strong>sendBroadcast(...)</strong>)</li>
                        <li class="fragment roll-in" >el sistema entrega el Intent a los diferentes broadcast receivers suscriptos a ese tipo de Intent</li>
                        <li class="fragment roll-in" >cada receptor(receiver) reciben un llamado a método <strong>onReceive(..)</strong></li>
                        </ul>
                </section>

                <section>
                    <h3>BroadcastReceiver - registrándose</h3>
			<p>
                        <ul>
<li class="fragment roll-in" >estática: en el Manifest.xml
<p><pre><code data-trim>
&lt;receiver
    android:name=".ReceiverTest" &gt;
    &lt;intent-filter&gt;
        &lt;action android:name="android.provider.Telephony.SMS_RECEIVED" &gt;
        &lt;/action&gt;
    &lt;/intent-filter&gt;
&lt;/receiver&gt;
</code></pre></p>
</li>
<li class="fragment roll-in" >dinámica: por código, método <strong>registerReceiver()</strong>
<p><pre><code data-trim>
mBroadcastMgr = LocalBroadcastManager
		.getInstance(getApplicationContext());
mBroadcastMgr.registerReceiver(receiver, intentFilter);

...

mBroadcastMgr.unregisterReceiver(receiver);
</code></pre></p>
</li>
                        </ul>
                </section>


                <section>
                    <h3>BroadcastReceiver - implementación</h3>
			<p>Proveer una clase que extienda BroadcastReceiver, y redefina <strong>onReceive(..)</strong>
<p><pre><code data-trim>
public class ReceiverTest extends BroadcastReceiver {

	@Override
	public void onReceive(Context context, Intent intent) {
		  Log.d("RECEIVER", "Intent recibido");
		  ...
	}

}
</code></pre></p>

                </section>


			</div>

		</div>

		<script src="dist/reveal.js"></script>
		<script src="plugin/zoom/zoom.js"></script>
		<script src="plugin/notes/notes.js"></script>
		<script src="plugin/search/search.js"></script>
		<script src="plugin/markdown/markdown.js"></script>
		<script src="plugin/highlight/highlight.js"></script>
		<script>
	
			// Also available as an ES module, see:
			// https://revealjs.com/initialization/
			Reveal.initialize({
				controls: true,
				progress: true,
				center: true,
				hash: true,
	
				// Learn about plugins: https://revealjs.com/plugins/
				plugins: [ RevealZoom, RevealNotes, RevealSearch, RevealMarkdown, RevealHighlight ]
			});
	
		</script>
	
	</body>
</html>
